(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function e(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=e(o);fetch(o.href,n)}})();class f{constructor(){this.keywords=new Set,this.OPTIMAL_DENSITY={min:.5,max:2.5},this.SPAM_THRESHOLD={density:3,consecutive:3}}addKeyword(t){this.keywords.add(t.toLowerCase())}removeKeyword(t){this.keywords.delete(t.toLowerCase())}analyzeContent({title:t,description:e,body:r}){const o=this.countWords(r),n=this.analyzeKeywords({title:t,description:e,body:r}),i=this.calculateSpamScore(n),c=this.generateSuggestions({title:t,description:e,body:r,keywordAnalysis:n});return{score:this.calculateScore({title:t,description:e,body:r,keywordAnalysis:n,wordCount:o}),dangerScore:i,wordCount:o,keywordAnalysis:n,suggestions:c}}countWords(t){return t.replace(/<[^>]*>/g," ").replace(/[^\w\s]/g," ").trim().split(/\s+/).filter(e=>e.length>0).length}analyzeKeywords({title:t,description:e,body:r}){const o=r.replace(/<[^>]*>/g," ").toLowerCase(),n={};let i=0;return this.keywords.forEach(c=>{const l=(t.toLowerCase().match(new RegExp(c,"g"))||[]).length,u=(e.toLowerCase().match(new RegExp(c,"g"))||[]).length,a=(o.match(new RegExp(c,"g"))||[]).length,d=this.countWords(o)>0?a/this.countWords(o)*100:0;n[c]={density:d,titleCount:l,descCount:u,bodyCount:a,isOptimal:d>=this.OPTIMAL_DENSITY.min&&d<=this.OPTIMAL_DENSITY.max},i+=d}),{densities:n,totalDensity:i}}calculateSpamScore(t){if(this.keywords.size===0)return 0;let e=0;const r=100;for(const[o,n]of Object.entries(t.densities))n.density>this.SPAM_THRESHOLD.density&&(e+=(n.density-this.SPAM_THRESHOLD.density)*20);return Math.min(Math.round(e),r)}generateSuggestions({title:t,description:e,body:r,keywordAnalysis:o}){const n=[],i=(r.match(/<h2/g)||[]).length,c=(r.match(/<h3/g)||[]).length,l=(r.match(/<a[^>]*>/g)||[]).length,u=this.countWords(r);if(this.keywords.size===0)n.push("üéØ Commencez par ajouter vos mots-cl√©s principaux");else for(const[a,d]of Object.entries(o.densities))d.density===0?n.push(`üìù Int√©grez le mot-cl√© "${a}" dans votre contenu`):d.density<this.OPTIMAL_DENSITY.min&&n.push(`üìà Augmentez l'utilisation du mot-cl√© "${a}"`),d.titleCount===0&&n.push(`üè∑Ô∏è Ajoutez le mot-cl√© "${a}" dans le titre`),d.descCount===0&&n.push(`üìã Incluez le mot-cl√© "${a}" dans la meta description`);return t||n.push("üìù Ajoutez un titre principal (Title)"),e||n.push("üìù Ajoutez une meta description (150-160 caract√®res)"),e&&e.length<120&&n.push("üìè Votre meta description est trop courte"),e&&e.length>160&&n.push("üìè Votre meta description est trop longue"),u===0?n.push("üìù Commencez √† r√©diger votre contenu"):(i===0&&n.push("üìö Structurez votre contenu avec des sous-titres (H2)"),c===0&&u>500&&n.push("üìë Ajoutez des sous-sections (H3)"),l===0&&n.push("üîó Ajoutez des liens internes et externes"),u<300&&n.push("üìà D√©veloppez votre contenu (minimum 300 mots)")),n}calculateScore({title:t,description:e,body:r,keywordAnalysis:o,wordCount:n}){if(this.keywords.size===0||n===0)return 0;let i=0;const c=100;n>=300&&(i+=15),n>=800&&(i+=15);const l=Array.from(this.keywords).reduce((u,a)=>(o.densities[a].isOptimal&&(u+=40/this.keywords.size),u),0);return i+=l,t&&(i+=15),e&&e.length>=120&&e.length<=160&&(i+=15),Math.round(Math.min(i,c))}}const g=new f;document.addEventListener("DOMContentLoaded",()=>{p(),y(),E(),m()});function p(){["page-title","page-description","content-editor"].forEach(s=>{document.getElementById(s).addEventListener("input",S(m,500))})}function y(){const s=document.getElementById("keyword-input"),t=document.getElementById("add-keyword");s.addEventListener("keypress",e=>{e.key==="Enter"&&h()}),t.addEventListener("click",h)}function h(){const s=document.getElementById("keyword-input");s.value.split(",").map(e=>e.trim()).filter(e=>e).forEach(e=>{e&&(g.addKeyword(e),w(e))}),s.value="",m()}function w(s){const t=document.createElement("div");t.className="keyword-tag",t.innerHTML=`
        ${s}
        <button onclick="window.removeKeyword('${s}')">&times;</button>
    `,document.getElementById("keywords-list").appendChild(t)}window.removeKeyword=function(s){g.removeKeyword(s);const t=document.getElementById("keywords-list"),e=Array.from(t.children).find(r=>r.textContent.trim().includes(s));e&&t.removeChild(e),m()};function E(){document.getElementById("content-editor").addEventListener("paste",t=>{t.preventDefault();const e=t.clipboardData.getData("text/html")||t.clipboardData.getData("text");document.execCommand("insertHTML",!1,e)})}function m(){const s=document.getElementById("page-title").value,t=document.getElementById("page-description").value,e=document.getElementById("content-editor").innerHTML,r=g.analyzeContent({title:s,description:t,body:e});L(r)}function L(s){const t=document.getElementById("seo-score");t.textContent=s.score,t.className="score-circle",s.score<50?t.classList.add("low"):s.score<80?t.classList.add("medium"):t.classList.add("high");const e=document.getElementById("danger-circle");e.textContent=s.dangerScore,s.dangerScore>50?e.classList.add("visible"):e.classList.remove("visible"),document.getElementById("word-count").textContent=s.wordCount,document.getElementById("reading-time").textContent=`${Math.ceil(s.wordCount/200)} min`;const r=document.getElementById("suggestions");r.innerHTML=`
        <h3>Suggestions d'am√©lioration</h3>
        ${s.suggestions.map(o=>`<div class="suggestion-item">${o}</div>`).join("")}
    `}function S(s,t){let e;return function(...o){const n=()=>{clearTimeout(e),s(...o)};clearTimeout(e),e=setTimeout(n,t)}}
